<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="pageTitle">
      Escort Profile
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="pageHolder" fullscreen>
  <mat-accordion class="escort-accordion">

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          General Info
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #generalIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="generalForm">
        <ion-list class="pageHolder">
          <ion-item>
            <ion-label position="floating" class="requiredField">Name</ion-label>
            <ion-input formControlName="nameControl" type="text" [(ngModel)]="editedEscort.name"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.name">
              <div class="error-message" *ngIf="generalForm.get('nameControl').hasError(validation.type) && (generalForm.get('nameControl').dirty || generalForm.get('nameControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">3-Letter Airport Code</ion-label>
            <ion-input formControlName="homeAirportCityControl" type="text" [(ngModel)]="editedEscort.homeAirportCity" maxlength="3" minlength="3"></ion-input>
            <!--
            <mwl-text-input-autocomplete-container>
              <textarea placeholder="Start typing to choose your city" class="form-control"
                rows="1" [(ngModel)]="editedEscort.homeAirportCity" formControlName="homeAirportCityControl"
                mwlTextInputAutocomplete
                [findChoices]="findAirportChoices" [getChoiceLabel]="getAirportChoiceLabel">
              </textarea>
            </mwl-text-input-autocomplete-container>
          -->
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.homeAirportCity">
              <div class="error-message" *ngIf="generalForm.get('homeAirportCityControl').hasError(validation.type) && (generalForm.get('homeAirportCityControl').dirty || generalForm.get('homeAirportCityControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
        </ion-list>
      </form>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Emergency Contact
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #emergencyContactIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="emergencyContactForm">
        <ion-list class="pageHolder">
          <ion-item>
            <ion-label position="floating" class="requiredField">Emergency Contact Name</ion-label>
            <ion-input formControlName="emergencyContactNameControl" type="text" [(ngModel)]="editedEscort.emergencyContactName"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.emergencyContactName">
              <div class="error-message" *ngIf="emergencyContactForm.get('emergencyContactNameControl').hasError(validation.type) && (emergencyContactForm.get('emergencyContactNameControl').dirty || emergencyContactForm.get('emergencyContactNameControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">Relation</ion-label>
            <ion-input formControlName="emergencyContactRelationControl" [(ngModel)]="editedEscort.emergencyContactRelation" type="text"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.emergencyContactRelation">
              <div class="error-message" *ngIf="emergencyContactForm.get('emergencyContactRelationControl').hasError(validation.type) && (emergencyContactForm.get('emergencyContactRelationControl').dirty || emergencyContactForm.get('emergencyContactRelationControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="stacked" class="requiredField">Phone Number</ion-label>
            <ion-input formControlName="emergencyContactPhoneControl" type="number" [(ngModel)]="editedEscort.emergencyContactPhone"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.emergencyContactPhone">
              <div class="error-message" *ngIf="emergencyContactForm.get('emergencyContactPhoneControl').hasError(validation.type) && (emergencyContactForm.get('emergencyContactPhoneControl').dirty || emergencyContactForm.get('emergencyContactPhoneControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
        </ion-list>
      </form>
    </mat-expansion-panel>
  
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Languages
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon style="color:green" #languagesIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="languagesForm">
        <ion-list class="pageHolder">
          <ion-item>
            <ion-label position="stacked" class="requiredField">Language #1</ion-label>
            <mat-form-field class="autocomplete">
              <input type="text" matInput formControlName="language1Control" [matAutocomplete]="language1" [(ngModel)]="editedEscort.language1">
            </mat-form-field>              
            <mat-autocomplete #language1="matAutocomplete">
              <mat-option *ngFor="let option of (languages1 | async)" [value]="option">{{option}}</mat-option>
            </mat-autocomplete>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.language1">
              <div class="error-message" *ngIf="languagesForm.get('language1Control').hasError(validation.type) && (languagesForm.get('language1Control').dirty || languagesForm.get('language1Control').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="stacked">Language #2</ion-label>
            <mat-form-field class="autocomplete">
              <input type="text" matInput formControlName="language2Control" [matAutocomplete]="language2" [(ngModel)]="editedEscort.language2">
            </mat-form-field>              
            <mat-autocomplete #language2="matAutocomplete">
              <mat-option *ngFor="let option of (languages2 | async)" [value]="option">{{option}}</mat-option>
            </mat-autocomplete>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Language #3</ion-label>
            <mat-form-field class="autocomplete">
              <input type="text" matInput formControlName="language3Control" [matAutocomplete]="language3" [(ngModel)]="editedEscort.language3">
            </mat-form-field>              
            <mat-autocomplete #language3="matAutocomplete">
              <mat-option *ngFor="let option of (languages3 | async)" [value]="option">{{option}}</mat-option>
            </mat-autocomplete>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Language #4</ion-label>
            <mat-form-field class="autocomplete">
              <input type="text" matInput formControlName="language4Control" [matAutocomplete]="language4" [(ngModel)]="editedEscort.language4">
            </mat-form-field>              
            <mat-autocomplete #language4="matAutocomplete">
              <mat-option *ngFor="let option of (languages4 | async)" [value]="option">{{option}}</mat-option>
            </mat-autocomplete>
          </ion-item>
        </ion-list>
      </form>
    </mat-expansion-panel>
  
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          New Hire Forms
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #newHireFormIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="newHireForm">
        <ion-list class="pageHolder">
          <ion-item>
            <a href="/assets/forms/newHireForms.zip" class="downloadLink" download>
              <div class="text">Download New Hire Forms</div>
            </a>
          </ion-item>
          <ion-item>
            <ion-label position="stacked" class="requiredField">Oath of Confidentiality - Signed</ion-label>
            <skycare-file-uploader filename="confidentialityOathFile" 
                                   type="escort"
                                   required="true" 
                                   setOnce="true"
                                   [(ngModel)]="escortDocs.confidentialityOathFile.name" 
                                   formControlName="confidentialityOathFileControl" 
                                   (onFileUploadRequested)="prepareForFileUpload($event)" 
                                   (onFileUploaded)="fileUploaded($event)"
                                   (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.confidentialityOathFile">
              <div class="error-message" *ngIf="newHireForm.get('confidentialityOathFileControl').hasError(validation.type) && (newHireForm.get('confidentialityOathFileControl').dirty || newHireForm.get('confidentialityOathFileControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="stacked" class="requiredField">Contractor Agreement - Signed</ion-label>
            <skycare-file-uploader filename="contractorAgreementFile" 
                                   type="escort"
                                   required="true" 
                                   setOnce="true"
                                   [(ngModel)]="escortDocs.contractorAgreementFile.name" 
                                   formControlName="contractorAgreementFileControl" 
                                   (onFileUploadRequested)="prepareForFileUpload($event)" 
                                   (onFileUploaded)="fileUploaded($event)"
                                   (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.contractorAgreementFile">
              <div class="error-message" *ngIf="newHireForm.get('contractorAgreementFileControl').hasError(validation.type) && (newHireForm.get('contractorAgreementFileControl').dirty || newHireForm.get('contractorAgreementFileControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="stacked" class="requiredField">Flight Physiology &amp; Infection Control Attestation - Signed</ion-label>
            <skycare-file-uploader filename="controlAttestationFile" 
                                   type="escort"
                                   required="true" 
                                   setOnce="true"
                                   [(ngModel)]="escortDocs.controlAttestationFile.name" 
                                   formControlName="controlAttestationFileControl" 
                                   (onFileUploadRequested)="prepareForFileUpload($event)" 
                                   (onFileUploaded)="fileUploaded($event)"
                                   (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.controlAttestationFile">
              <div class="error-message" *ngIf="newHireForm.get('controlAttestationFileControl').hasError(validation.type) && (newHireForm.get('controlAttestationFileControl').dirty || newHireForm.get('controlAttestationFileControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
        </ion-list>
      </form>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Licenses
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #licenseIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="licenseForm">
        <ion-list class="pageHolder">
          <ion-item-group>
            <ion-item-divider color="success" class="divider-label">
              <ion-label>Medical License</ion-label>
            </ion-item-divider>
            <ion-item>
              <ion-label position="stacked" class="requiredField">Upload copy of License</ion-label>
              <skycare-file-uploader filename="licenseFile" 
                                      type="escort" 
                                      required="true"
                                      setOnce="true"
                                      [(ngModel)]="escortDocs.licenseFile.name" 
                                      formControlName="licenseFileControl" 
                                      (onFileUploadRequested)="prepareForFileUpload($event)" 
                                      (onFileUploaded)="fileUploaded($event)"
                                      (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.licenseFile">
                <div class="error-message" *ngIf="licenseForm.get('licenseFileControl').hasError(validation.type) && (licenseForm.get('licenseFileControl').dirty || licenseForm.get('licenseFileControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="floating" class="requiredField">License Type</ion-label>
              <ion-select [(ngModel)]="editedEscort.licenseType" formControlName="licenseTypeControl" placeholder="Select One" interface="popover">
                <ion-select-option value="Paramedic">Paramedic</ion-select-option>
                <ion-select-option value="Nurse">Nurse</ion-select-option>
                <ion-select-option value="Physician">Physician</ion-select-option>
              </ion-select>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.licenseType">
                <div class="error-message" *ngIf="licenseForm.get('licenseTypeControl').hasError(validation.type) && (licenseForm.get('licenseTypeControl').dirty || licenseForm.get('licenseTypeControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked" class="requiredField">License Expiration</ion-label>
              <mat-form-field class="date-chooser">
                <input matInput 
                              formControlName="licenseExpirationControl" 
                              [matDatepicker]="licenseExpirationPicker"  
                              [(ngModel)]="licenseExpirationDateString">
                <mat-datepicker-toggle matSuffix [for]="licenseExpirationPicker">
                    <mat-icon matDatepickerToggleIcon style="font-size: 35px; margin-left: -15px;">event</mat-icon>
                </mat-datepicker-toggle>
                <mat-datepicker touchUi #licenseExpirationPicker></mat-datepicker>
              </mat-form-field>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.licenseExpiration">
                <div class="error-message" *ngIf="licenseForm.get('licenseExpirationControl').hasError(validation.type) && (licenseForm.get('licenseExpirationControl').dirty || licenseForm.get('licenseExpirationControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </ion-item-group>
          <ion-item-group>
            <ion-item-divider color="success" class="divider-label">
              <ion-label>ALS / ACLS</ion-label>
            </ion-item-divider>
            <ion-item>
              <ion-label position="stacked" class="requiredField">Upload copy of ALS/ACLS</ion-label>
              <skycare-file-uploader filename="alsFile" 
                                    type="escort" 
                                    required="true"
                                    setOnce="true"
                                    [(ngModel)]="escortDocs.alsFile.name" 
                                    formControlName="alsFileControl" 
                                    (onFileUploadRequested)="prepareForFileUpload($event)" 
                                    (onFileUploaded)="fileUploaded($event)"
                                    (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.alsFile">
                <div class="error-message" *ngIf="licenseForm.get('alsFileControl').hasError(validation.type) && (licenseForm.get('alsFileControl').dirty || licenseForm.get('alsFileControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked" class="requiredField">ALS/ACLS Expiration</ion-label>
              <mat-form-field class="date-chooser">
                <input matInput 
                              formControlName="alsExpirationControl" 
                              [matDatepicker]="alsExpirationPicker"  
                              [(ngModel)]="alsExpirationDateString">
                <mat-datepicker-toggle matSuffix [for]="alsExpirationPicker">
                    <mat-icon matDatepickerToggleIcon style="font-size: 35px; margin-left: -15px;">event</mat-icon>
                </mat-datepicker-toggle>
                <mat-datepicker touchUi #alsExpirationPicker></mat-datepicker>
              </mat-form-field>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.alsExpiration">
                <div class="error-message" *ngIf="licenseForm.get('alsExpirationControl').hasError(validation.type) && (licenseForm.get('alsExpirationControl').dirty || licenseForm.get('alsExpirationControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </ion-item-group>
        </ion-list>
      </form>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Travel Docs
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #travelDocsIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="travelDocsForm">
        <ion-list class="pageHolder">
          <ion-item-group>
            <ion-item-divider color="success" class="divider-label">
              <ion-label>Passport</ion-label>
            </ion-item-divider>
            <ion-item>
              <ion-label position="stacked" class="requiredField">Upload copy of Passport</ion-label>
              <skycare-file-uploader filename="passportFile" 
                                    type="escort" 
                                    required="false"
                                    setOnce="true"
                                    [(ngModel)]="escortDocs.passportFile.name" 
                                    formControlName="passportFileControl" 
                                    (onFileUploadRequested)="prepareForFileUpload($event)" 
                                    (onFileUploaded)="fileUploaded($event)"
                                    (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.passportFile">
                <div class="error-message" *ngIf="travelDocsForm.get('passportFileControl').hasError(validation.type) && (travelDocsForm.get('passportFileControl').dirty || travelDocsForm.get('passportFileControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked" class="requiredField">Passport Country</ion-label>
              <mat-form-field class="autocomplete">
                <input type="text" matInput formControlName="passportCountryControl" [matAutocomplete]="passportCountry" [(ngModel)]="editedEscort.passportCountry">
              </mat-form-field>              
              <mat-autocomplete #passportCountry="matAutocomplete">
                <mat-option *ngFor="let option of (passportCountries | async)" [value]="option">{{option}}</mat-option>
              </mat-autocomplete>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.passportCountry">
                <div class="error-message" *ngIf="travelDocsForm.get('passportCountryControl').hasError(validation.type) && (travelDocsForm.get('passportCountryControl').dirty || travelDocsForm.get('passportCountryControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked" class="requiredField">Passport Expiration</ion-label>
              <mat-form-field class="date-chooser">
                <input matInput 
                              formControlName="passportExpirationControl" 
                              [matDatepicker]="passportExpirationPicker"  
                              [(ngModel)]="passportExpirationDateString">
                <mat-datepicker-toggle matSuffix [for]="passportExpirationPicker">
                    <mat-icon matDatepickerToggleIcon style="font-size: 35px; margin-left: -15px;">event</mat-icon>
                </mat-datepicker-toggle>
                <mat-datepicker touchUi #passportExpirationPicker></mat-datepicker>
              </mat-form-field>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.passportExpiration">
                <div class="error-message" *ngIf="travelDocsForm.get('passportExpirationControl').hasError(validation.type) && (travelDocsForm.get('passportExpirationControl').dirty || travelDocsForm.get('passportExpirationControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </ion-item-group>
          <ion-item-group>
            <ion-item-divider color="success" class="divider-label">
              <ion-label>Visa #1</ion-label>
            </ion-item-divider>
            <ion-item>
              <ion-label position="stacked">Upload copy of Visa #1</ion-label>
              <skycare-file-uploader filename="visa1File" 
                                    type="escort" 
                                    setOnce="true"
                                    [(ngModel)]="escortDocs.visa1File.name" 
                                    formControlName="visa1FileControl" 
                                    (onFileUploadRequested)="prepareForFileUpload($event)" 
                                    (onFileUploaded)="fileUploaded($event)"
                                    (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.visa1File">
                <div class="error-message" *ngIf="travelDocsForm.get('visa1FileControl').hasError(validation.type) && (travelDocsForm.get('visa1FileControl').dirty || travelDocsForm.get('visa1FileControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked">Visa #1 Country</ion-label>
              <mat-form-field class="autocomplete">
                <input type="text" matInput formControlName="visa1CountryControl" [matAutocomplete]="visa1Country" [(ngModel)]="editedEscort.visaCountry1">
              </mat-form-field>              
              <mat-autocomplete #visa1Country="matAutocomplete">
                <mat-option *ngFor="let option of (visa1Countries | async)" [value]="option">{{option}}</mat-option>
              </mat-autocomplete>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.visa1Country">
                <div class="error-message" *ngIf="travelDocsForm.get('visa1CountryControl').hasError(validation.type) && (travelDocsForm.get('visa1CountryControl').dirty || travelDocsForm.get('visa1CountryControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </ion-item-group>
          <ion-item-group>
            <ion-item-divider color="success" class="divider-label">
              <ion-label>Visa #2</ion-label>
            </ion-item-divider>
            <ion-item>
              <ion-label position="stacked">Upload copy of Visa #2</ion-label>
              <skycare-file-uploader filename="visa2File" 
                                    type="escort" 
                                    setOnce="true"
                                    [(ngModel)]="escortDocs.visa2File.name" 
                                    formControlName="visa2FileControl" 
                                    (onFileUploadRequested)="prepareForFileUpload($event)" 
                                    (onFileUploaded)="fileUploaded($event)"
                                    (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.visa2File">
                <div class="error-message" *ngIf="travelDocsForm.get('visa2FileControl').hasError(validation.type) && (travelDocsForm.get('visa2FileControl').dirty || travelDocsForm.get('visa2FileControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked">Visa #2 Country</ion-label>
              <mat-form-field class="autocomplete">
                <input type="text" matInput formControlName="visa2CountryControl" [matAutocomplete]="visa2Country" [(ngModel)]="editedEscort.visaCountry2">
              </mat-form-field>              
              <mat-autocomplete #visa2Country="matAutocomplete">
                <mat-option *ngFor="let option of (visa2Countries | async)" [value]="option">{{option}}</mat-option>
              </mat-autocomplete>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.visa2Country">
                <div class="error-message" *ngIf="travelDocsForm.get('visa2CountryControl').hasError(validation.type) && (travelDocsForm.get('visa2CountryControl').dirty || travelDocsForm.get('visa2CountryControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </ion-item-group>
          <ion-item-group>
            <ion-item-divider color="success" class="divider-label">
              <ion-label>Visa #3</ion-label>
            </ion-item-divider>
            <ion-item>
              <ion-label position="stacked">Upload copy of Visa #3</ion-label>
              <skycare-file-uploader filename="visa3File" 
                                    type="escort" 
                                    setOnce="true"
                                    [(ngModel)]="escortDocs.visa3File.name" 
                                    formControlName="visa3FileControl" 
                                    (onFileUploadRequested)="prepareForFileUpload($event)" 
                                    (onFileUploaded)="fileUploaded($event)"
                                    (onFileViewRequested)="showUploadedFile($event)"></skycare-file-uploader>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.visa3File">
                <div class="error-message" *ngIf="travelDocsForm.get('visa3FileControl').hasError(validation.type) && (travelDocsForm.get('visa3FileControl').dirty || travelDocsForm.get('visa3FileControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
            <ion-item>
              <ion-label position="stacked">Visa #3 Country</ion-label>
              <mat-form-field class="autocomplete">
                <input type="text" matInput formControlName="visa3CountryControl" [matAutocomplete]="visa3Country" [(ngModel)]="editedEscort.visaCountry3">
              </mat-form-field>              
              <mat-autocomplete #visa3Country="matAutocomplete">
                <mat-option *ngFor="let option of (visa3Countries | async)" [value]="option">{{option}}</mat-option>
              </mat-autocomplete>
            </ion-item>
            <div class="validation-errors">
              <ng-container *ngFor="let validation of validationMessages.visa3Country">
                <div class="error-message" *ngIf="travelDocsForm.get('visa3CountryControl').hasError(validation.type) && (travelDocsForm.get('visa3CountryControl').dirty || travelDocsForm.get('visa3CountryControl').touched)">
                  {{ validation.message }}
                </div>
              </ng-container>
            </div>
          </ion-item-group>
        </ion-list>
      </form>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Payment Info
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #paymentInfoIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="paymentInfoForm">
        <ion-list class="pageHolder">
          <ion-item>
            <ion-label position="floating" class="requiredField">Name on Account</ion-label>
            <ion-input formControlName="paymentAccountNameControl" type="text" [(ngModel)]="editedEscort.paymentAccountName"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.paymentAccountName">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentAccountNameControl').hasError(validation.type) && (paymentInfoForm.get('paymentAccountNameControl').dirty || paymentInfoForm.get('paymentAccountNameControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">Bank Name</ion-label>
            <ion-input formControlName="paymentBankNameControl" type="text" [(ngModel)]="editedEscort.paymentBankName"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.paymentBankName">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankNameControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankNameControl').dirty || paymentInfoForm.get('paymentBankNameControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">Bank Address</ion-label>
            <ion-grid class="bankAddressGrid">
              <ion-row>
                <ion-col size="12">
                    <ion-input formControlName="paymentBankAddress1Control" type="text" [(ngModel)]="editedEscort.paymentBankAddress1" placeholder="Address Line 1"></ion-input>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="12">
                  <ion-input formControlName="paymentBankAddress2Control" type="text" [(ngModel)]="editedEscort.paymentBankAddress2" placeholder="Address Line 2"></ion-input>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="4">
                  <ion-input formControlName="paymentBankCityControl" type="text" [(ngModel)]="editedEscort.paymentBankCity" placeholder="City"></ion-input>
                </ion-col>
                <ion-col size="4">
                  <ion-input formControlName="paymentBankRegionControl" type="text" [(ngModel)]="editedEscort.paymentBankRegion" placeholder="Region"></ion-input>
                </ion-col>     
                <ion-col size="4">
                  <ion-input formControlName="paymentBankPostalCodeControl" type="text" [(ngModel)]="editedEscort.paymentBankPostalCode" placeholder="Postal"></ion-input>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="12">
                  <mat-form-field class="autocomplete">
                    <input type="text" matInput formControlName="paymentBankCountryControl" [matAutocomplete]="paymentBankCountry" [(ngModel)]="editedEscort.paymentBankCountry" placeholder="Country">
                  </mat-form-field>              
                  <mat-autocomplete #paymentBankCountry="matAutocomplete">
                    <mat-option *ngFor="let option of (paymentBankCountries | async)" [value]="option">{{option}}</mat-option>
                  </mat-autocomplete>
                </ion-col>     
              </ion-row>
            </ion-grid>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of paymentValidationMessages">
              <div class="error-message" *ngIf="paymentAddressControlHasValidationError(validation)">
                {{ getAddressValidationMessage(validation) }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">Bank Routing Type</ion-label>
            <ion-select formControlName="paymentBankRoutingTypeControl" [(ngModel)]="bankRoutingType" placeholder="Select One" interface="popover">
              <ion-select-option value="aba">ABA - US Only</ion-select-option>
              <ion-select-option value="iban">IBAN - International</ion-select-option>
              <ion-select-option value="bic">BIC - International</ion-select-option>
              <ion-select-option value="swift">SWIFT - International</ion-select-option>
            </ion-select>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.paymentBankRoutingType">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankRoutingTypeControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankRoutingTypeControl').dirty || paymentInfoForm.get('paymentBankRoutingTypeControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">Bank Routing Code</ion-label>
            <ion-input formControlName="paymentBankABARoutingNumberControl" type="tel" [(ngModel)]="editedEscort.paymentUSRoutingNumber" *ngIf="bankRoutingType == 'aba' || bankRoutingType == ''"></ion-input>
            <ion-input formControlName="paymentBankIBANRoutingNumberControl" type="text" [(ngModel)]="editedEscort.paymentIntlRoutingNumber" *ngIf="bankRoutingType == 'iban'"></ion-input>
            <ion-input formControlName="paymentBankBICRoutingNumberControl" type="text" [(ngModel)]="editedEscort.paymentIntlRoutingNumber" *ngIf="bankRoutingType == 'bic'"></ion-input>
            <ion-input formControlName="paymentBankSWIFTRoutingNumberControl" type="text" [(ngModel)]="editedEscort.paymentIntlRoutingNumber" *ngIf="bankRoutingType == 'swift'"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.paymentBankABARoutingNumber">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankABARoutingNumberControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankABARoutingNumberControl').dirty || paymentInfoForm.get('paymentBankABARoutingNumberControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
            <ng-container *ngFor="let validation of validationMessages.paymentBankIBANRoutingNumber">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankIBANRoutingNumberControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankIBANRoutingNumberControl').dirty || paymentInfoForm.get('paymentBankIBANRoutingNumberControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
            <ng-container *ngFor="let validation of validationMessages.paymentBankBICRoutingNumber">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankBICRoutingNumberControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankBICRoutingNumberControl').dirty || paymentInfoForm.get('paymentBankBICRoutingNumberControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
            <ng-container *ngFor="let validation of validationMessages.paymentBankSWIFTRoutingNumber">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankSWIFTRoutingNumberControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankSWIFTRoutingNumberControl').dirty || paymentInfoForm.get('paymentBankSWIFTRoutingNumberControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
          <ion-item>
            <ion-label position="floating" class="requiredField">Bank Account Number</ion-label>
            <ion-input formControlName="paymentBankAccountNumberControl" type="text" [(ngModel)]="editedEscort.paymentAccountNumber"></ion-input>
          </ion-item>
          <div class="validation-errors">
            <ng-container *ngFor="let validation of validationMessages.paymentBankAccountNumber">
              <div class="error-message" *ngIf="paymentInfoForm.get('paymentBankAccountNumberControl').hasError(validation.type) && (paymentInfoForm.get('paymentBankAccountNumberControl').dirty || paymentInfoForm.get('paymentBankAccountNumberControl').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </div>
        </ion-list>
      </form>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Availability
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon #availabilityIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <form [formGroup]="availabilityForm">
        <ion-list class="pageHolder">
          <ion-item>
            <skycare-calendar [(ngModel)]="editedEscort.availability" class="availability-calendar" formControlName="availabilityCalendarControl" name="availabilityCalendarControl"></skycare-calendar>
          </ion-item>
        </ion-list>
      </form>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title style="margin-top: 12px;" class="blueButton">
          Security Credentials
        </mat-panel-title>
        <mat-panel-description>
          &nbsp;
          <mat-icon style="color:green" #credentialsIcon>check_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <p style="text-align:justify;">
        WARNING - Click this button if you would like to reset your email, password, or phone number.  
        Clicking this button will log you out and you will need to check your email.  
        All information in your profile will be left untouched during this login reset.
      </p>
      <p style="text-align:center;">
        Only your email, password, and phone number will be changed
        <br/><br/>
        Click below to begin this process
        <br/>
        <ion-button color="danger" shape="round" (click)="passwordReset()">Reset Email, Password, and Phone</ion-button>
      </p>
    </mat-expansion-panel>

  </mat-accordion>

  <ion-button [disabled]="saveButtonDisabled" color="primary" shape="round" expand="block" (click)="saveProfile()">Save Profile</ion-button>
</ion-content>