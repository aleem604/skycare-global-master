<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="pageTitle">
      Admin Flightboard
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>


  <ion-grid class="pageHolder">
      <ion-row class="listHeader" nowrap>
          <ion-col size-xs="6" 
                   size-md="4" 
                   size-lg="2" 
                   size-xl="1" class="listColumnHeader">Case No<span class="sorter">
                     <span class="top" (click)="sortAscending($event, 'caseNumber')">&#9650;</span>
                     <span class="bot" (click)="sortDescending($event, 'caseNumber')">&#9660;</span></span></ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listColumnHeader">Patient</ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listColumnHeader">Diagnosis</ion-col>
          <ion-col size-xs="6"
                   size-md="4"
                   size-lg="2"
                   size-xl="1" class="listColumnHeader">Origin<span class="sorter">
                     <span class="top" (click)="sortAscending($event, 'originCity')">&#9650;</span>
                     <span class="bot" (click)="sortDescending($event, 'originCity')">&#9660;</span></span></ion-col>
          <ion-col size-lg="2"
                   size-xl="1" class="hidden-xs hidden-sm hidden-md listColumnHeader">Dest<span class="sorter">
                     <span class="top" (click)="sortAscending($event, 'destinationCity')">&#9650;</span>
                     <span class="bot" (click)="sortDescending($event, 'destinationCity')">&#9660;</span></span></ion-col>
          <ion-col size-lg="3"
                   size-xl="2" class="hidden-xs hidden-sm hidden-md listColumnHeader">Status<span class="sorter">
                     <span class="top" (click)="sortAscending($event, 'currentStatus')">&#9650;</span>
                     <span class="bot" (click)="sortDescending($event, 'currentStatus')">&#9660;</span></span></ion-col>
          <ion-col size-md="4"
                   size-lg="1" 
                   size-xl="1" class="hidden-xs hidden-sm listColumnHeader">Escort<span class="sorter">
                     <span class="top" (click)="sortAscending($event, 'firstEscort')">&#9650;</span>
                     <span class="bot" (click)="sortDescending($event, 'firstEscort')">&#9660;</span></span></ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listColumnHeader">Paid</ion-col>
          <ion-col size-lg="2"
                   size-xl="1" class="hidden-xs hidden-sm hidden-md listColumnHeader">Company<span class="sorter">
                     <span class="top" (click)="sortAscending($event, 'companyName')">&#9650;</span>
                     <span class="bot" (click)="sortDescending($event, 'companyName')">&#9660;</span></span></ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listColumnHeader">Quote</ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listColumnHeader">Invoiced</ion-col>
      </ion-row>
      <ion-row *ngIf="companyCases.length == 0">
          <ion-col size="12">No Active Cases</ion-col>
      </ion-row>
      <ion-row *ngFor="let companyCase of companyCases; let n=index" class="listRow" nowrap>          
          <ion-col size-xs="6" 
                   size-md="4" 
                   size-lg="2" 
                   size-xl="1" class="listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.caseNumber}}</ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.patientFirstName | slice:0:1}}&nbsp;{{companyCase.patientLastName}}</ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.diagnosis}}</ion-col>
          <ion-col size-xs="6"
                   size-md="4"
                   size-lg="2"
                   size-xl="1" class="listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.originCity}}</ion-col>
          <ion-col size-lg="2"
                   size-xl="1" class="hidden-xs hidden-sm hidden-md listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.destinationCity}}</ion-col>
          <ion-col size-lg="3"
                   size-xl="2" class="hidden-xs hidden-sm hidden-md listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.currentStatus}}</ion-col>
          <ion-col size-md="4"
                   size-lg="1" 
                   size-xl="1" class="hidden-xs hidden-sm listCell" (click)="viewCase(companyCase.caseID)">
            <span *ngFor="let escort of companyCase.escorts">{{escort.name | personName }}</span>
          </ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listCell" (click)="viewCase(companyCase.caseID)">
            <ion-checkbox checked="{{escortsPaid[n]}}" disabled="true"></ion-checkbox>
          </ion-col>
          <ion-col size-lg="2"
                   size-xl="1" class="hidden-xs hidden-sm hidden-md listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.companyName}}</ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listCell" (click)="viewCase(companyCase.caseID)">{{companyCase.quotedPrice}}</ion-col>
          <ion-col size-xl="1" class="hidden-xs hidden-sm hidden-md hidden-lg listCell">
            <ion-toggle [disabled]="companyCase.currentStatus != 'All case documentation & receipts complete'" checked="{{invoiceSent[n]}}" (ionChange)="toggleInvoiceSent($event, companyCase.caseID, n)"></ion-toggle>
          </ion-col>
      </ion-row>
  </ion-grid>

</ion-content>



